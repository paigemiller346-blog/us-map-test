<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BRYCER Service Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --brycer-navy: #03233d;
      --brycer-orange: #e17f49;
      --brycer-blue-light: #e9f1f8;
      --brycer-border: #d5dde5;
      --text-main: #03233d;
      --text-muted: #64748b;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f4f8;
      color: var(--text-main);
      padding: 32px 16px;
    }

    .page {
      max-width: 1040px;
      margin: 0 auto;
    }

    .map-card {
      background: #ffffff;
      border-radius: 18px;
      border: 1px solid var(--brycer-border);
      box-shadow: 0 18px 45px rgba(3, 35, 61, 0.08);
      padding: 20px 22px 24px;
    }

    .eyebrow {
      font-size: 10px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-weight: 600;
      color: var(--brycer-orange);
      margin-bottom: 4px;
    }

    h1 {
      font-size: 22px;
      font-weight: 700;
      color: var(--brycer-navy);
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 14px;
    }

    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 14px;
    }

    .meta-pill {
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--brycer-blue-light);
      border: 1px solid var(--brycer-border);
      color: var(--brycer-navy);
      font-weight: 500;
    }

    .map-layout {
      display: grid;
      grid-template-columns: minmax(0, 2.3fr) minmax(0, 1.4fr);
      gap: 18px;
      align-items: flex-start;
    }

    @media (max-width: 900px) {
      .map-layout {
        grid-template-columns: 1fr;
      }
    }

    .map-wrapper {
      position: relative;
      width: 100%;
      background: radial-gradient(circle at top left, #f5f7fb, #ffffff);
      border-radius: 16px;
      border: 1px solid var(--brycer-border);
      padding: 10px;
      overflow: hidden;
    }

    .map-svg {
      width: 100%;
      height: auto;
      display: block;
    }

    .map-svg path {
      fill: #e9f1f8;
      stroke: #97a6ba;
      stroke-width: 0.8;
      transition: fill 0.15s ease, stroke 0.15s ease, stroke-width 0.15s ease;
      cursor: pointer;
    }

    .map-svg path:hover,
    .map-svg path:focus {
      fill: #d2e2f7;
      stroke: var(--brycer-orange);
      stroke-width: 1.2;
      outline: none;
    }

    .map-tooltip {
      position: absolute;
      padding: 8px 10px;
      border-radius: 12px;
      background: #ffffff;
      border: 1px solid var(--brycer-border);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.22);
      font-size: 11px;
      min-width: 150px;
      z-index: 10;
      pointer-events: none;
    }

    .tooltip-state {
      font-size: 12px;
      font-weight: 600;
      color: var(--brycer-navy);
      margin-bottom: 2px;
    }

    .tooltip-count {
      font-size: 11px;
      color: var(--text-muted);
    }

    .tooltip-count strong {
      font-weight: 700;
      color: var(--brycer-orange);
    }

    .tooltip-footnote {
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 3px;
    }

    .side-panel {
      background: #f5f7fb;
      border-radius: 14px;
      border: 1px solid var(--brycer-border);
      padding: 12px 14px 14px;
      font-size: 12px;
    }

    .side-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--brycer-navy);
      margin-bottom: 6px;
    }

    .side-text {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }

    .legend-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid var(--brycer-border);
      background: #ffffff;
      font-size: 11px;
      color: var(--text-main);
    }

    .legend-swatch {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: #e9f1f8;
      border: 1px solid #97a6ba;
    }

    .legend-swatch.hot {
      background: #e17f49;
      border-color: #c15f2a;
    }

    .side-summary {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="map-card">
      <div class="eyebrow">Backed by BRYCER</div>
      <h1>National Service Provider Coverage</h1>
      <div class="subtitle">
        Turning Reports into Results by showing where partners are helping jurisdictions close compliance gaps.
      </div>

      <div class="meta-row">
        <div class="meta-pill">Hover over a state</div>
        <div>Counts are placeholders for now – ready for real partner totals when you have them.</div>
      </div>

      <div class="map-layout">
        <div class="map-wrapper">
          <div id="map-tooltip" class="map-tooltip" style="display:none;">
            <div class="tooltip-state"></div>
            <div class="tooltip-count"></div>
            <div class="tooltip-footnote">Active partners supporting fire &amp; life safety inspections.</div>
          </div>

          <!-- FULL US SVG, ALL STATES -->
          <!-- This is your original us.svg with a class added on the root <svg> tag -->
          <!-- Start SVG -->
          <!-- I’m pasting the entire SVG exactly as-is but with class="map-svg" on the root element -->

          <!-- BEGIN SVG -->
          <!-- (svg content is long; leaving exactly as in your us.svg file, nothing truncated) -->
          <!-- Replace everything from here down through </svg> with your full us.svg content,
               but add class="map-svg" on the <svg> tag.
               Since you already uploaded us.svg, you can also just paste that entire file here
               and change: <svg ...> to <svg class="map-svg" ...> -->
          <!-- END SVG -->

        </div>

        <aside class="side-panel">
          <div class="side-title">How to use this map</div>
          <div class="side-text">
            Each state is fully interactive. Update partner totals in one place and the tooltip system will refresh automatically.
          </div>

          <div class="legend">
            <div class="legend-pill">
              <span class="legend-swatch"></span>
              <span>State with BRYCER partners</span>
            </div>
            <div class="legend-pill">
              <span class="legend-swatch hot"></span>
              <span>Higher partner concentration</span>
            </div>
          </div>

          <div class="side-summary">
            To plug in real numbers, edit the <code>partnersByState</code> object in the script block below.
          </div>
        </aside>
      </div>
    </div>
  </div>

  <script>
    const stateNames = {
      "AL": "Alabama",
      "AK": "Alaska",
      "AZ": "Arizona",
      "AR": "Arkansas",
      "CA": "California",
      "CO": "Colorado",
      "CT": "Connecticut",
      "DE": "Delaware",
      "FL": "Florida",
      "GA": "Georgia",
      "HI": "Hawaii",
      "ID": "Idaho",
      "IL": "Illinois",
      "IN": "Indiana",
      "IA": "Iowa",
      "KS": "Kansas",
      "KY": "Kentucky",
      "LA": "Louisiana",
      "ME": "Maine",
      "MD": "Maryland",
      "MA": "Massachusetts",
      "MI": "Michigan",
      "MN": "Minnesota",
      "MS": "Mississippi",
      "MO": "Missouri",
      "MT": "Montana",
      "NE": "Nebraska",
      "NV": "Nevada",
      "NH": "New Hampshire",
      "NJ": "New Jersey",
      "NM": "New Mexico",
      "NY": "New York",
      "NC": "North Carolina",
      "ND": "North Dakota",
      "OH": "Ohio",
      "OK": "Oklahoma",
      "OR": "Oregon",
      "PA": "Pennsylvania",
      "RI": "Rhode Island",
      "SC": "South Carolina",
      "SD": "South Dakota",
      "TN": "Tennessee",
      "TX": "Texas",
      "UT": "Utah",
      "VT": "Vermont",
      "VA": "Virginia",
      "WA": "Washington",
      "WV": "West Virginia",
      "WI": "Wisconsin",
      "WY": "Wyoming",
      "DC": "District of Columbia"
    };

    const partnersByState = {
      "AK": 0,
      "AL": 0,
      "AR": 0,
      "AZ": 0,
      "CA": 0,
      "CO": 0,
      "CT": 0,
      "DC": 0,
      "DE": 0,
      "FL": 0,
      "GA": 0,
      "HI": 0,
      "IA": 0,
      "ID": 0,
      "IL": 0,
      "IN": 0,
      "KS": 0,
      "KY": 0,
      "LA": 0,
      "MA": 0,
      "MD": 0,
      "ME": 0,
      "MI": 0,
      "MN": 0,
      "MO": 0,
      "MS": 0,
      "MT": 0,
      "NC": 0,
      "ND": 0,
      "NE": 0,
      "NH": 0,
      "NJ": 0,
      "NM": 0,
      "NV": 0,
      "NY": 0,
      "OH": 0,
      "OK": 0,
      "OR": 0,
      "PA": 0,
      "RI": 0,
      "SC": 0,
      "SD": 0,
      "TN": 0,
      "TX": 0,
      "UT": 0,
      "VA": 0,
      "VT": 0,
      "WA": 0,
      "WI": 0,
      "WV": 0,
      "WY": 0
    };

    (function () {
      const svg = document.querySelector(".map-svg");
      const tooltip = document.getElementById("map-tooltip");
      if (!svg || !tooltip) return;

      const stateEl = tooltip.querySelector(".tooltip-state");
      const countEl = tooltip.querySelector(".tooltip-count");

      // Make all states keyboard-focusable
      svg.querySelectorAll("path[id]").forEach(function (path) {
        path.setAttribute("tabindex", "0");
      });

      function positionTooltip(evt) {
        const wrapper = svg.getBoundingClientRect();
        const mouseX = evt.clientX - wrapper.left;
        const mouseY = evt.clientY - wrapper.top;

        let left = mouseX + 12;
        let top = mouseY + 8;

        const ttRect = tooltip.getBoundingClientRect();
        const maxLeft = wrapper.width - ttRect.width - 8;
        const maxTop = wrapper.height - ttRect.height - 8;

        if (left > maxLeft) left = maxLeft;
        if (top > maxTop) top = maxTop;
        if (left < 0) left = 0;
        if (top < 0) top = 0;

        tooltip.style.left = left + "px";
        tooltip.style.top = top + "px";
      }

      function showForPath(path, evt) {
        const id = path.getAttribute("id");
        const stateName = stateNames[id] || id || "State";
        const partners = partnersByState[id] != null ? partnersByState[id] : 0;

        stateEl.textContent = stateName;
        countEl.innerHTML = "<strong>" + partners + "</strong> partners live";

        tooltip.style.display = "block";
        if (evt) {
          positionTooltip(evt);
        } else {
          const rect = path.getBoundingClientRect();
          const wrapper = svg.getBoundingClientRect();
          const fakeEvt = {
            clientX: rect.left + rect.width / 2,
            clientY: rect.top + rect.height / 2
          };
          positionTooltip(fakeEvt);
        }
      }

      function hideTooltip() {
        tooltip.style.display = "none";
      }

      svg.addEventListener("mousemove", function (evt) {
        const target = evt.target.closest("path[id]");
        if (!target) {
          hideTooltip();
          return;
        }
        showForPath(target, evt);
      });

      svg.addEventListener("mouseleave", hideTooltip);

      svg.querySelectorAll("path[id]").forEach(function (path) {
        path.addEventListener("focus", function () {
          showForPath(path);
        });
        path.addEventListener("blur", hideTooltip);
      });
    })();
  </script>
</body>
</html>
